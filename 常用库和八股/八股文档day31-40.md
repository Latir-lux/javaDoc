# 八股训练营

## Day31

### Case1

#### 题目：Java创建线程有哪几种方式？

**答案：**

在`Java`中，创建线程主要有以下几种方式：

1. **继承Thread类**：继承`Thread`类，并重写其`run`方法来定义线程执行的任务。缺点在于`Java`只支持单继承，所以继承`Thread`类成本很高。
2. **实现Runnable接口**：实现了`Runnable`接口，并重写其`run`方法。然后创建该类的**实例**作为参数传递给`Thread`对象。比继承的方式更灵活，但是这两种方式都无法在线程执行完之后返回值。
3. **使用Callable接口和FutureTask**：实现了`Callable`接口，并重写其`call`方法，该方法可以返回结果并抛出异常。将实现了`Callable`接口的类的实例，作为参数传递给`FutureTask`对象，再将`FutureTask`对象传递给`Thread`类，就可以使用**`start()`**方法启动线程。
4. **使用线程池**：前三种方法实际上都通过`new`一个`Thread`对象来创建线程，通过`Executors`类创建线程池，过程是向`ExecutorService`类对象传入一个实现了`Runnable`接口的对象，调用对象的`execute`方法。
5. **使用CompletableFuture类**：这是JDK1.8引入的类，可以用来执行异步任务。

虽然看上去创建线程的方法有很多，但是严格来说只有一种方法，因为这些方式最终都实现了`Runnable`接口，并且都依赖于`new Thread().start()`来创建线程。

详细内容参考：

[腾讯一面：请问java如何创建线程？创建线程的方式有几种？搞懵了。。_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1Ru4y1n7Lw/?share_source=copy_web&vd_source=9bb0aa9c2c3cc1b12ca6f343a55b4e80)

[Java并发常见面试题总结（上） | JavaGuide](https://javaguide.cn/java/concurrent/java-concurrent-questions-01.html#如何创建线程)

### Case2

#### 题目：线程start和run的区别

**答案：**

在Java多线程中，`run`方法和`start`方法的区别在于：

1. `start()`方法Java线程的内置方法，包含了创建新线程的代码逻辑，能够确保代码在**新的线程**上下文中运行。调用后会为线程分配系统资源，让线程处于就绪状态，调度器选择该线程时，会执行`run()`方法中的代码。一个线程在他的生命周期中**只能调用一次**`start()`方法，如果多次调用会抛出异常，表示该线程已经启动过了，不能再次启动。
2. 而`run()`方法是程序员定义的，是线程的执行体，不能创建新的线程，只会在**当前线程的**上下文中执行。如果直接调用`run()`方法，那只是一个**普通的方法调用**，仍然只有一个主线程，并且只能顺序执行，`run()`方法执行完成后才会执行后面的代码。

因此，`run()`方法并不会创建一个新的线程，如果需要实现多线程执行，需要调用`start()`方法来启动新县城。

详细内容参考：

[【Java高级】为什么启动线程不直接调用run()，而要调用start()，如果调用两次start()方法会有什么后果？_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1s8411W7hV/?share_source=copy_web&vd_source=9bb0aa9c2c3cc1b12ca6f343a55b4e80)

















